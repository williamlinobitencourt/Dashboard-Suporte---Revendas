<!DOCTYPE html>  
<html lang="pt-BR">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">  
    <meta http-equiv="Pragma" content="no-cache">  
    <meta http-equiv="Expires" content="0">  
    <title>Dashboard - Tool Business</title>  
    <style>  
        * {  
            margin: 0;  
            padding: 0;  
            box-sizing: border-box;  
        }
  
        body {  
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;  
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);  
            padding: 20px;  
            min-height: 100vh;  
        }
  
        .header {  
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);  
            color: white;  
            padding: 40px;  
            border-radius: 15px;  
            margin-bottom: 30px;  
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);  
            text-align: center;  
            position: relative;  
        }
  
        .header h1 {  
            font-size: 3em;  
            margin-bottom: 15px;  
            font-weight: 700;  
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);  
        }
  
        .header p {  
            font-size: 1.3em;  
            opacity: 0.95;  
            font-weight: 300;  
        }
  
        .ultima-atualizacao {  
            position: absolute;  
            top: 15px;  
            right: 20px;  
            font-size: 0.75em;  
            opacity: 0.9;  
            background: rgba(255, 255, 255, 0.15);  
            padding: 8px 14px;  
            border-radius: 6px;  
            backdrop-filter: blur(10px);  
            font-weight: 500;  
            z-index: 10;  
            white-space: nowrap;  
        }
  
        .ai-badge {  
            position: absolute;  
            top: 15px;  
            left: 20px;  
            background: rgba(255, 255, 255, 0.2);  
            padding: 8px 14px;  
            border-radius: 20px;  
            font-size: 0.75em;  
            backdrop-filter: blur(10px);  
            border: 1px solid rgba(255, 255, 255, 0.3);  
            font-weight: 500;  
            z-index: 10;  
            white-space: nowrap;  
        }
  
        @media (max-width: 768px) {  
            .ultima-atualizacao {  
                font-size: 0.65em;  
                top: 10px;  
                right: 15px;  
                padding: 6px 10px;  
            }  
        }
  
        .nav-buttons {  
            display: flex;  
            justify-content: center;  
            gap: 20px;  
            margin-bottom: 30px;  
        }
  
        .nav-btn {  
            padding: 15px 40px;  
            border: none;  
            border-radius: 10px;  
            font-size: 1.2em;  
            font-weight: 700;  
            cursor: pointer;  
            transition: all 0.3s ease;  
            background: white;  
            color: #667eea;  
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);  
            text-transform: uppercase;  
            letter-spacing: 1px;  
        }
  
        .nav-btn.active {  
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);  
            color: white;  
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);  
            transform: translateY(-2px);  
        }
  
        .nav-btn:hover {  
            transform: translateY(-2px);  
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);  
        }
  
        .content-section {  
            display: none;  
        }
  
        .content-section.active {  
            display: block;  
        }
  
        .dashboard-container {  
            background: white;  
            padding: 30px;  
            border-radius: 15px;  
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);  
            margin-bottom: 30px;  
            position: relative;  
        }
  
        .dashboard-title {  
            font-size: 1.8em;  
            color: #333;  
            margin-bottom: 25px;  
            font-weight: 600;  
            border-bottom: 3px solid #667eea;  
            padding-bottom: 10px;  
            display: flex;  
            align-items: center;  
            gap: 15px;  
        }
  
        .info-icon {  
            cursor: help;  
            font-size: 0.6em;  
            position: relative;  
            margin-left: 8px;  
        }
  
        .info-icon:hover::after {  
            content: attr(data-tooltip);  
            position: absolute;  
            bottom: 100%;  
            left: 50%;  
            transform: translateX(-50%);  
            background: rgba(0, 0, 0, 0.9);  
            color: white;  
            padding: 12px 16px;  
            border-radius: 8px;  
            font-size: 0.85rem;  
            white-space: normal;  
            width: 350px;  
            z-index: 1000;  
            margin-bottom: 8px;  
            font-weight: 400;  
            line-height: 1.5;  
            text-align: left;  
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);  
        }
  
        .info-icon:hover::before {  
            content: '';  
            position: absolute;  
            bottom: 100%;  
            left: 50%;  
            transform: translateX(-50%);  
            border: 6px solid transparent;  
            border-top-color: rgba(0, 0, 0, 0.9);  
            margin-bottom: 2px;  
        }
  
        .pendencias-grid {  
            display: grid;  
            grid-template-columns: repeat(3, 1fr);  
            gap: 20px;  
            margin-bottom: 30px;  
        }
  
        .pendencia-card {  
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);  
            color: white;  
            padding: 25px;  
            border-radius: 12px;  
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);  
        }
  
        .pendencia-card h3 {  
            font-size: 1.3em;  
            margin-bottom: 20px;  
            font-weight: 600;  
            text-transform: uppercase;  
            letter-spacing: 1px;  
            border-bottom: 2px solid rgba(255,255,255,0.3);  
            padding-bottom: 10px;  
            display: flex;  
            align-items: center;  
            justify-content: space-between;  
        }
  
        .pendencia-count {  
            font-weight: 700;  
            background: rgba(255, 255, 255, 0.2);  
            padding: 4px 12px;  
            border-radius: 12px;  
            font-size: 0.9em;  
        }
  
        .pendencia-content {  
            max-height: 400px;  
            overflow-y: auto;  
            padding-right: 5px;  
        }
  
        .pendencia-content::-webkit-scrollbar {  
            width: 8px;  
        }
  
        .pendencia-content::-webkit-scrollbar-track {  
            background: rgba(255, 255, 255, 0.1);  
            border-radius: 4px;  
        }
  
        .pendencia-content::-webkit-scrollbar-thumb {  
            background: rgba(255, 255, 255, 0.3);  
            border-radius: 4px;  
        }
  
        .pendencia-content::-webkit-scrollbar-thumb:hover {  
            background: rgba(255, 255, 255, 0.5);  
        }
  
        .pendencia-item {  
            background: rgba(255, 255, 255, 0.15);  
            padding: 15px;  
            border-radius: 8px;  
            margin-bottom: 15px;  
            backdrop-filter: blur(10px);  
        }
  
        .pendencia-item:last-child {  
            margin-bottom: 0;  
        }
  
        .pendencia-revenda {  
            font-weight: 700;  
            font-size: 1.1em;  
            margin-bottom: 10px;  
            display: flex;  
            align-items: center;  
        }
  
        .pendencia-revenda::before {  
            content: "‚ö†Ô∏è";  
            margin-right: 8px;  
            font-size: 1.2em;  
        }
  
        .pendencia-descricao {  
            font-size: 0.95em;  
            line-height: 1.8;  
            display: flex;  
            flex-wrap: wrap;  
            gap: 8px;  
        }
  
        .pendencia-descricao span {  
            display: inline-block;  
            margin-bottom: 0;  
        }
  
        .pendencia-descricao span::before {  
            content: "‚Ä¢ ";  
            margin-right: 5px;  
        }
  
        .sem-pendencias {  
            text-align: center;  
            padding: 40px;  
            font-size: 1.1em;  
            color: rgba(255,255,255,0.9);  
            font-style: italic;  
        }
  
        .table-container {  
            overflow-x: auto;  
        }
  
        table {  
            width: 100%;  
            border-collapse: collapse;  
            background: white;  
        }
  
        thead {  
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);  
            color: white;  
        }
  
        th {  
            padding: 15px;  
            text-align: center;  
            font-weight: 600;  
            font-size: 0.95em;  
            text-transform: uppercase;  
            letter-spacing: 0.5px;  
        }
  
        th:first-child {  
            text-align: left;  
        }
  
        td {  
            padding: 12px 15px;  
            border-bottom: 1px solid #e0e0e0;  
            text-align: center;  
            font-weight: 600;  
        }
  
            /* Estilos para colunas de texto longo (Descri√ß√£o e Observa√ß√µes) */  
        .texto-longo {  
            max-width: 300px;  
            word-wrap: break-word;  
            word-break: break-word;  
            white-space: normal;  
            overflow-wrap: break-word;  
            line-height: 1.5;  
            padding: 10px;  
        }
      
        #tabela-ocorrencias {  
            table-layout: fixed;  
            width: 100%;  
        }
      
        #tabela-ocorrencias th,  
        #tabela-ocorrencias td {  
            word-wrap: break-word;  
            overflow-wrap: break-word;  
        }
      
        /* Larguras espec√≠ficas para cada coluna */  
        #tabela-ocorrencias th:nth-child(1),  
        #tabela-ocorrencias td:nth-child(1) {  
            width: 100px;  
        }
      
        #tabela-ocorrencias th:nth-child(2),  
        #tabela-ocorrencias td:nth-child(2) {  
            width: 100px;  
        }
      
        #tabela-ocorrencias th:nth-child(3),  
        #tabela-ocorrencias td:nth-child(3) {  
            width: 80px;  
        }
      
        #tabela-ocorrencias th:nth-child(4),  
        #tabela-ocorrencias td:nth-child(4) {  
            width: 150px;  
        }
      
        #tabela-ocorrencias th:nth-child(5),  
        #tabela-ocorrencias td:nth-child(5) {  
            width: 300px;  
        }
      
        #tabela-ocorrencias th:nth-child(6),  
        #tabela-ocorrencias td:nth-child(6) {  
            width: 300px;  
        }

            td:first-child {  
            text-align: left;  
            font-weight: 600;  
            color: #333;  
        }
  
        tbody tr:hover {  
            opacity: 0.85;  
            transition: opacity 0.3s ease;  
        }
  
        .media-row {  
            background: #fff3cd !important;  
            font-weight: 700;  
            border-top: 3px solid #ffc107;  
        }
  
        .na-value {  
            color: #9ca3af;  
            font-style: italic;  
            background: #f3f4f6 !important;  
        }
  
        .trend-icon {  
            font-size: 0.75em;  
            margin-left: 5px;  
        }
  
        .trend-up {  
            color: #10b981;  
        }
  
        .trend-down {  
            color: #ef4444;  
        }
  
        .health-badge {  
            display: inline-block;  
            padding: 4px 12px;  
            border-radius: 12px;  
            font-size: 0.85em;  
            font-weight: 600;  
            margin-left: 10px;  
        }
  
        .porte-badge {  
            display: inline-block;  
            padding: 4px 12px;  
            border-radius: 12px;  
            font-size: 0.85em;  
            font-weight: 600;  
            margin-left: 10px;  
        }
  
        .porte-pequeno {  
            background: #fbbf24;  
            color: #78350f;  
        }
  
        .porte-medio {  
            background: #60a5fa;  
            color: #1e3a8a;  
        }
  
        .porte-grande {  
            background: #34d399;  
            color: #064e3b;  
        }
  
        .kpis-grid {  
            display: grid;  
            grid-template-columns: repeat(2, 1fr);  
            gap: 20px;  
            margin-bottom: 30px;  
        }
  
        .kpi-card {  
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);  
            color: white;  
            padding: 30px;  
            border-radius: 12px;  
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);  
        }
  
        .kpi-label {  
            font-size: 1.1em;  
            opacity: 0.9;  
            margin-bottom: 15px;  
            text-transform: uppercase;  
            letter-spacing: 1px;  
            font-weight: 600;  
        }
  
        .kpi-value {  
            font-size: 3em;  
            font-weight: 700;  
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);  
            margin-bottom: 10px;  
        }
  
        .kpi-subtitle {  
            font-size: 1em;  
            opacity: 0.85;  
            display: flex;  
            justify-content: space-between;  
            margin-top: 10px;  
        }
  
        .charts-section {  
            margin-bottom: 30px;  
        }
  
        .filter-buttons {  
            display: flex;  
            gap: 15px;  
            justify-content: center;  
            margin-bottom: 25px;  
            flex-wrap: wrap;  
        }
  
        .filter-btn {  
            padding: 12px 30px;  
            border: none;  
            border-radius: 8px;  
            font-size: 1.1em;  
            font-weight: 600;  
            cursor: pointer;  
            transition: all 0.3s ease;  
            background: #e0e0e0;  
            color: #666;  
        }
  
        .filter-btn.active {  
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);  
            color: white;  
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);  
        }
  
        .filter-btn:hover {  
            transform: translateY(-2px);  
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);  
        }
  
        .revenda-btn {  
            padding: 10px 20px;  
            border: 2px solid #667eea;  
            border-radius: 6px;  
            font-size: 0.95em;  
            font-weight: 600;  
            cursor: pointer;  
            transition: all 0.3s ease;  
            background: white;  
            color: #667eea;  
        }
  
        .revenda-btn.active {  
            background: #667eea;  
            color: white;  
        }
  
        .revenda-btn:hover {  
            transform: scale(1.05);  
        }
  
        .charts-grid {  
            display: grid;  
            grid-template-columns: repeat(2, 1fr);  
            gap: 20px;  
            margin-bottom: 30px;  
        }
  
        .chart-container {  
            background: white;  
            padding: 20px;  
            border-radius: 12px;  
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);  
        }
  
        .chart-title {  
            font-size: 1.2em;  
            color: #333;  
            margin-bottom: 15px;  
            font-weight: 600;  
            text-align: center;  
        }
  
        .ranking-grid {  
            display: grid;  
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));  
            gap: 15px;  
        }
  
        .ranking-item {  
            display: flex;  
            align-items: center;  
            padding: 15px;  
            background: #f8f9fa;  
            border-radius: 8px;  
            transition: all 0.3s ease;  
        }
  
        .ranking-item:hover {  
            background: #e9ecef;  
            transform: translateX(5px);  
        }
  
        .ranking-info {  
            flex: 1;  
        }
  
        .ranking-revenda {  
            font-weight: 600;  
            color: #333;  
            margin-bottom: 5px;  
        }
  
        .ranking-stats {  
            font-size: 0.85em;  
            color: #666;  
        }
  
        .ranking-percentual {  
            font-size: 1.3em;  
            font-weight: 700;  
            color: #667eea;  
            margin-left: 15px;  
        }
  
        .stats-row {  
            background: #f0f4ff !important;  
            font-weight: 600;  
            color: #667eea;  
        }
  
        .stats-row td {  
            font-size: 0.95em;  
            padding: 15px 10px;  
        }
  
        .status-atingida {  
            color: #10b981;  
        }
  
        .status-nao-atingida {  
            color: #ef4444;  
        }
  
        .status-justificada {  
            color: #f59e0b;  
        }
  
        .status-pendente {  
            color: #9ca3af;  
        }
  
        .status-sem-meta {  
            color: #d1d5db;  
        }
  
        .legenda {  
            display: flex;  
            justify-content: center;  
            gap: 30px;  
            margin: 20px 0;  
            padding: 15px;  
            background: #f8f9fa;  
            border-radius: 8px;  
        }
  
        .legenda-item {  
            display: flex;  
            align-items: center;  
            gap: 8px;  
            font-size: 0.95em;  
        }
  
        .legenda-simbolo {  
            font-size: 1.3em;  
            font-weight: 700;  
        }
  
                /* üî• NOVO: Estilos para Ocorr√™ncias */  
        .tipo-reclam {  
            background: #fee2e2 !important;  
            color: #991b1b;  
            font-weight: 700;  
        }
  
        .tipo-proc {  
            background: #fef3c7 !important;  
            color: #92400e;  
            font-weight: 700;  
        }
  
        .origem-web {  
            background: #dbeafe;  
            color: #1e40af;  
            padding: 4px 8px;  
            border-radius: 4px;  
            font-size: 0.9em;  
        }
  
        .origem-fone {  
            background: #dcfce7;  
            color: #166534;  
            padding: 4px 8px;  
            border-radius: 4px;  
            font-size: 0.9em;  
        }
  
        #tabela-ocorrencias tbody tr:hover {  
            background: #f3f4f6;  
            transition: background 0.2s ease;  
        }

        @media (max-width: 1400px) {  
            .pendencias-grid {  
                grid-template-columns: 1fr;  
            }
  
            .kpis-grid {  
                grid-template-columns: 1fr;  
            }
  
            .charts-grid {  
                grid-template-columns: 1fr;  
            }  
        }
  
        @media (max-width: 768px) {  
            .header h1 {  
                font-size: 2em;  
            }
  
            .pendencias-grid {  
                grid-template-columns: 1fr;  
            }
  
            table {  
                font-size: 0.9em;  
            }
  
            th, td {  
                padding: 10px;  
            }
  
            .nav-buttons {  
                flex-direction: column;  
                gap: 10px;  
            }
  
            .nav-btn {  
                width: 100%;  
            }  
        }
  
        /* üî• DASHBOARD INDIVIDUAL: Sem ordena√ß√£o (apenas 1 revenda) */  
        th {  
            padding: 15px;  
            text-align: center;  
            font-weight: 600;  
            font-size: 0.95em;  
            text-transform: uppercase;  
            letter-spacing: 0.5px;  
        }
          
        th:first-child {  
            text-align: left;  
        }  
  
        /* üî• NOVO: Estilo para linha da revenda atual (destaque) */  
        .revenda-atual {  
            background: #e0f2fe !important;  
            border-left: 4px solid #0284c7 !important;  
            font-weight: 700 !important;  
        }
  
        .revenda-anonimizada {  
            opacity: 0.6;  
            font-style: italic;  
        }
  
    </style>  
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>  
</head>  
<body>  
    <div class="header">  
        <div class="ai-badge">  
            ü§ñ Powered by Claude 4.5 Sonnet  
        </div>  
        <div class="ultima-atualizacao">  
            üìÖ √öltima atualiza√ß√£o: 15/12/2025 √†s 09:53:18  
        </div>  
        <h1>üìä Dashboard - Tool Business</h1>  
        <p>Per√≠odo: Novembro/2025</p>  
    </div>
  
    <div class="nav-buttons">  
        <button class="nav-btn active" onclick="trocarAba('geral', event)">üìä GERAL</button>  
        <button class="nav-btn" onclick="trocarAba('metas', event)">üéØ METAS</button>
        <button class="nav-btn" onclick="trocarAba('ocorrencias', event)">üö® OCORR√äNCIAS</button>
    </div>
  
    <div id="secao-geral" class="content-section active">  
        <div class="dashboard-container">  
            <div class="dashboard-title">  
                üö® Pend√™ncias  
                <span class="info-icon" data-tooltip="Mostra RDMs, A√ß√µes e Reclama√ß√µes pendentes da sua revenda.">‚ÑπÔ∏è</span>  
            </div>  
            <div class="pendencias-grid" id="pendencias-container"></div>  
        </div>
  
        <div class="dashboard-container">  
            <div class="dashboard-title">  
                üìà M√©tricas Comparativas  
                <span class="info-icon" data-tooltip="Compara√ß√£o dos seus indicadores com a m√©dia geral de todas as revendas. Sua revenda est√° destacada em azul. Outras revendas aparecem como 'Revenda Confidencial' por quest√µes de privacidade.">‚ÑπÔ∏è</span>  
            </div>  
            <div class="table-container">  
                <table>  
                    <thead>  
                        <tr>  
                            <th>Revenda</th>  
                            <th>Health Score<br><span style="font-size: 0.75em; font-weight: 400;">(acum.)</span></th>  
                            <th>Classifica√ß√£o</th>  
                            <th>Usu√°rios</th>  
                            <th>Porte</th>  
                            <th>TME</th>  
                            <th>Insatisfa√ß√£o</th>  
                            <th>Tempo M√©dio Espera (SSC)</th>  
                            <th>Saldo Pend√™ncias</th>  
                            <th>%SS/SSC</th>  
                            <th>NPS<br><span style="font-size: 0.75em; font-weight: 400;">(acum.)</span></th>  
                            <th>Ocorr√™ncias (%)<br><span style="font-size: 0.75em; font-weight: 400;">(acum.)</span></th>  
                        </tr>  
                    </thead>  
                    <tbody id="tbody-dados"></tbody>  
                </table>  
            </div>  
        </div>  
    </div>
  
    <div id="secao-metas" class="content-section">  
        <div id="botoes-ano" class="filter-buttons" style="margin-bottom: 20px;">  
            <button class="filter-btn active" onclick="alternarAno('2025', event)">üìÖ 2025</button>  
            <button class="filter-btn" onclick="alternarAno('2024', event)">üìÖ 2024</button>  
        </div>
  
        <div class="dashboard-container">  
            <div class="dashboard-title">  
                üìä Vis√£o Geral  
                <span class="info-icon" data-tooltip="Estat√≠sticas gerais de atingimento de metas.">‚ÑπÔ∏è</span>  
            </div>  
            <div class="kpis-grid" id="kpis-visao-geral"></div>  
        </div>
  
        <div class="dashboard-container">  
            <div class="dashboard-title">  
                üìà Evolu√ß√£o Mensal  
                <span class="info-icon" data-tooltip="Gr√°ficos de evolu√ß√£o ao longo dos meses. Use os filtros para alternar entre 'Metas Gerais' e 'Metas Principais'.">‚ÑπÔ∏è</span>  
            </div>  
            <div class="filter-buttons">  
                <button class="filter-btn active" onclick="alternarFiltro('geral', event)">Metas Gerais</button>  
                <button class="filter-btn" onclick="alternarFiltro('principais', event)">Metas Principais</button>  
            </div>  
            <div class="charts-grid">  
                <div class="chart-container">  
                    <div class="chart-title">Atingimento de Metas por M√™s</div>  
                    <canvas id="chart-evolucao"></canvas>  
                </div>  
                <div class="chart-container">  
                    <div class="chart-title">Distribui√ß√£o de Status por M√™s</div>  
                    <canvas id="chart-status"></canvas>  
                </div>  
            </div>  
        </div>
  
        <div class="dashboard-container">  
            <div class="dashboard-title">  
                üìã Detalhamento - Todas as Metas  
                <span class="info-icon" data-tooltip="Visualiza√ß√£o detalhada m√™s a m√™s de todas as suas metas. S√≠mbolos: ‚óè = Meta Atingida | ‚úó = Meta N√£o Atingida | ‚ñ† = Meta Justificada | - = Sem Meta.">‚ÑπÔ∏è</span>  
            </div>  
            <div class="legenda">  
                <div class="legenda-item">  
                    <span class="legenda-simbolo status-atingida">‚óè</span>  
                    <span>Meta Atingida</span>  
                </div>  
                <div class="legenda-item">  
                    <span class="legenda-simbolo status-nao-atingida">‚úó</span>  
                    <span>Meta N√£o Atingida</span>  
                </div>  
                <div class="legenda-item">  
                    <span class="legenda-simbolo status-justificada">‚ñ†</span>  
                    <span>Meta Justificada</span>  
                </div>  
                <div class="legenda-item">  
                    <span class="legenda-simbolo status-sem-meta">-</span>  
                    <span>Sem Meta</span>  
                </div>  
            </div>  
            <div class="table-container">  
                <table id="tabela-revenda"></table>  
            </div>  
        </div>  
    </div>
  
    <!-- üî• NOVA SE√á√ÉO: OCORR√äNCIAS -->  
    <div id="secao-ocorrencias" class="content-section">  
        <div class="dashboard-container">  
            <div class="dashboard-title">  
                üö® Hist√≥rico de Ocorr√™ncias  
                <span class="info-icon" data-tooltip="Exibe todas as ocorr√™ncias registradas para sua revenda. Use os filtros para refinar a visualiza√ß√£o por data, tipo, origem ou categoria.">‚ÑπÔ∏è</span>  
            </div>
              
            <!-- Filtros -->  
            <div class="filter-buttons" style="margin-bottom: 20px; gap: 10px;">  
                <select id="filtro-tipo" onchange="filtrarOcorrencias()" style="padding: 10px; border-radius: 6px; border: 2px solid #667eea; font-size: 1em; font-weight: 600;">  
                    <option value="">üè∑Ô∏è Todos os Tipos</option>  
                </select>
                  
                <select id="filtro-origem" onchange="filtrarOcorrencias()" style="padding: 10px; border-radius: 6px; border: 2px solid #667eea; font-size: 1em; font-weight: 600;">  
                    <option value="">üìç Todas as Origens</option>  
                </select>
                  
                <select id="filtro-categoria" onchange="filtrarOcorrencias()" style="padding: 10px; border-radius: 6px; border: 2px solid #667eea; font-size: 1em; font-weight: 600;">  
                    <option value="">üìÇ Todas as Categorias</option>  
                </select>
                  
                <button onclick="limparFiltros()" style="padding: 10px 20px; border-radius: 6px; border: 2px solid #ef4444; background: white; color: #ef4444; font-size: 1em; font-weight: 600; cursor: pointer;">  
                    üîÑ Limpar Filtros  
                </button>  
            </div>
              
            <!-- Contador de resultados -->  
            <div id="contador-ocorrencias" style="text-align: center; margin-bottom: 15px; font-size: 1.1em; font-weight: 600; color: #667eea;"></div>
              
            <!-- Tabela de Ocorr√™ncias -->  
            <div class="table-container">  
                <table id="tabela-ocorrencias">  
                    <thead>  
                        <tr>  
                            <th onclick="ordenarOcorrencias('data')" style="cursor: pointer;">üìÖ Data</th>  
                            <th onclick="ordenarOcorrencias('tipo')" style="cursor: pointer;">üè∑Ô∏è Tipo</th>  
                            <th onclick="ordenarOcorrencias('origem')" style="cursor: pointer;">üìç Origem</th>  
                            <th onclick="ordenarOcorrencias('categoria')" style="cursor: pointer;">üìÇ Categoria</th>
                            <th onclick="ordenarOcorrencias('descricao')" style="cursor: pointer;">üìù Descri√ß√£o</th>  
                            <th onclick="ordenarOcorrencias('observacoes')" style="cursor: pointer;">üí¨ Observa√ß√µes</th>
                        </tr>  
                    </thead>  
                    <tbody id="tbody-ocorrencias"></tbody>  
                </table>  
            </div>  
        </div>  
    </div>

    <script>  
        // üîí PROTE√á√ÉO POR SENHA ESPEC√çFICA DA REVENDA  
        (function() {  
            const authExpiry = localStorage.getItem('dashboard_Tool_Business_auth_expiry');  
            const now = new Date().getTime();
  
            if (authExpiry && now < parseInt(authExpiry)) {  
                console.log('‚úÖ Usu√°rio j√° autenticado');  
                return;  
            }
  
            const senhaCorreta = "Tool483729";  
            let tentativas = 0;  
            const maxTentativas = 3;
  
            while (tentativas < maxTentativas) {  
                const senhaDigitada = prompt(`üîê Dashboard Tool Business\n\nDigite a senha para acessar:\n\n(Tentativa ${tentativas + 1} de ${maxTentativas})`);
  
                if (senhaDigitada === null) {  
                    document.body.innerHTML = `  
                        <div style="display: flex; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">  
                            <div style="text-align: center; color: white; font-family: 'Segoe UI', sans-serif;">  
                                <h1 style="font-size: 3em; margin-bottom: 20px;">üîí</h1>  
                                <h2 style="font-size: 2em; margin-bottom: 10px;">Acesso Cancelado</h2>  
                                <p style="font-size: 1.2em; opacity: 0.9;">Recarregue a p√°gina para tentar novamente.</p>  
                            </div>  
                        </div>  
                    `;  
                    throw new Error("Acesso cancelado pelo usu√°rio");  
                }
  
                if (senhaDigitada === senhaCorreta) {  
                    const expiry = now + (24 * 60 * 60 * 1000);  
                    localStorage.setItem('dashboard_Tool_Business_auth_expiry', expiry.toString());  
                    console.log('‚úÖ Senha correta! Acesso liberado por 24 horas.');  
                    return;  
                }
  
                tentativas++;
  
                if (tentativas >= maxTentativas) {  
                    document.body.innerHTML = `  
                        <div style="display: flex; align-items: center; justify-content: center; height: 100vh; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">  
                            <div style="text-align: center; color: white; font-family: 'Segoe UI', sans-serif;">  
                                <h1 style="font-size: 3em; margin-bottom: 20px;">‚ùå</h1>  
                                <h2 style="font-size: 2em; margin-bottom: 10px;">Acesso Negado</h2>  
                                <p style="font-size: 1.2em; opacity: 0.9; margin-bottom: 30px;">M√°ximo de tentativas excedido.</p>  
                                <p style="font-size: 1em; opacity: 0.8;">Aguarde 5 minutos e recarregue a p√°gina para tentar novamente.</p>  
                            </div>  
                        </div>  
                    `;
  
                    const blockExpiry = now + (5 * 60 * 1000);  
                    localStorage.setItem('dashboard_block_expiry', blockExpiry.toString());  
                    throw new Error("Acesso negado - tentativas excedidas");  
                }
  
                alert(`‚ùå Senha incorreta!\n\nVoc√™ tem mais ${maxTentativas - tentativas} tentativa(s).`);  
            }  
        })();
  
        const dadosRevendas = [{"nome": "Tool Business", "usuarios": 0, "usuarios_anterior": 0, "ocorrencias_reclam": 0, "ocorrencias_proc": 0, "percentual_ocorrencias": 0, "percentual_ocorrencias_anterior": 0, "ocorrencias_mensais": [], "percentual_ocorrencias_acumulado": 0, "insatisfacao_mensal": [], "insatisfacao": "N/D", "insatisfacao_num": 0, "insatisfacao_anterior_num": 0, "tme_mensal": [], "tme": "N/D", "tme_seconds": 0, "tme_anterior_seconds": 0, "tempo_espera_mensal": [], "tme_mensal_anterior": [], "insatisfacao_mensal_anterior": [], "tempo_espera_mensal_anterior": [], "saldo_pendencias_mensal_anterior": [], "nps_mensal_anterior": [], "tempo_espera": "N/D", "tempo_espera_seconds": 0, "tempo_espera_anterior_seconds": 0, "saldo_pendencias": "N/D", "saldo_pendencias_num": 0, "saldo_pendencias_anterior_num": 0, "ss_ssc": "N/D", "ss_ssc_num": 0, "ss_ssc_anterior_num": 0, "nps": "N/D", "nps_anterior_num": 0, "saldo_pendencias_mensal": [], "nps_mensal": [], "health_score": 100, "health_classificacao": {"emoji": "üü¢", "texto": "EXCELENTE", "cor": "#10b981"}, "porte": "GRANDE", "health_score_anterior": 100}];  
        const revendaAtual = "Tool Business";  
        const pendenciasData = {"rdms": [], "acoes": [], "reclamacoes": []};  
        const mediaTme = '00:01:02';  
        const mediaTmeSeconds = 62;  
        const mediaInsatisfacao = '1.56%';  
        const mediaInsatisfacaoNum = 1.56;  
        const mediaTempoEspera = '01:09:50';  
        const mediaTempoEsperaSeconds = 4190;  
        const mediaSaldoPendencias = '16.19%';  
        const mediaSaldoPendenciasNum = 16.19;  
        const mediaSSSSC = '3.31%';  
        const mediaSSSSCNum = 3.31;  
        const mediaNPS = '71';  
        const mediaNPSNum = 71;  
        const mediaOcorrencias = 0;  
        const mediaOcorrenciasPonderada = 0;  
        const dadosMetasPorAno = {"2025": {}, "2024": {}};  
        const estatisticasPorAno = {"2025": {}, "2024": {}};
  
        let anoAtual = '2025';  
        let dadosMetas = dadosMetasPorAno['2025'];  
        let estatisticas = estatisticasPorAno['2025'];  
        const usuariosDict = {};
        
        // üî• NOVO: Dados de Ocorr√™ncias  
        const ocorrenciasData = [];  
        let ocorrenciasFiltradas = [...ocorrenciasData];  
        let ordemOcorrencias = {coluna: 'data', direcao: 'asc'};
          
        let chartEvolucao = null;  
        let chartStatus = null;  
        let filtroAtual = 'geral';  
        let revendaSelecionada = revendaAtual;
  
        const ordemMetas = [  
            'SLA FOLHA', 'SLA FISCONT', 'SLA AT',  
            'TME FOLHA', 'TME FISCONT', 'TME AT',  
            'ABANDONO', 'INSATISFA√á√ÉO WEB', 'INSATISFA√á√ÉO FONE',  
            'DISPONIBILIDADE', 'FTE'  
        ];
  
        const nomesMetas = {  
            'SLA FOLHA': 'SLA Folha',  
            'SLA FISCONT': 'SLA Fiscont',  
            'SLA AT': 'SLA AT',  
            'TME FOLHA': 'TME Folha',  
            'TME FISCONT': 'TME Fiscont',  
            'TME AT': 'TME AT',  
            'ABANDONO': 'Abandono de liga√ß√µes',  
            'INSATISFA√á√ÉO WEB': 'Insatisfa√ß√£o WEB',  
            'INSATISFA√á√ÉO FONE': 'Insatisfa√ß√£o FONE',  
            'DISPONIBILIDADE': 'Disponibilidade FONE',  
            'FTE': 'FTE'  
        };
  
        function alternarAno(ano, event) {  
            anoAtual = ano;
  
            const botoesAnoContainer = event.target.parentElement;  
            botoesAnoContainer.querySelectorAll('.filter-btn').forEach(btn => {  
                btn.classList.remove('active');  
            });  
            event.target.classList.add('active');
  
            dadosMetas = dadosMetasPorAno[ano] || {};  
            estatisticas = estatisticasPorAno[ano] || {};
  
            if (Object.keys(dadosMetas).length === 0) {  
                document.getElementById('kpis-visao-geral').innerHTML =  
                    `<p style="text-align: center; padding: 40px; color: #666;">‚ö†Ô∏è Nenhum dado de meta dispon√≠vel para ${ano}</p>`;  
                document.getElementById('tabela-revenda').innerHTML =  
                    `<p style="text-align: center; padding: 40px; color: #666;">‚ö†Ô∏è Nenhum dado dispon√≠vel para ${ano}</p>`;
  
                if (chartEvolucao) {  
                    chartEvolucao.destroy();  
                    chartEvolucao = null;  
                }  
                if (chartStatus) {  
                    chartStatus.destroy();  
                    chartStatus = null;  
                }
  
                return;  
            }
  
            filtroAtual = 'geral';
  
            const secaoMetas = document.getElementById('secao-metas');  
            const todosContainers = secaoMetas.querySelectorAll('.filter-buttons');
  
            if (todosContainers.length > 1) {  
                const botoesMetasContainer = todosContainers[1];  
                botoesMetasContainer.querySelectorAll('.filter-btn').forEach((btn, idx) => {  
                    if (idx === 0) {  
                        btn.classList.add('active');  
                    } else {  
                        btn.classList.remove('active');  
                    }  
                });  
            }
  
            gerarKPIsVisaoGeral();  
            atualizarGraficos();  
            gerarTabelaRevenda();  
        }
  
        let ordemAtual = {'coluna': 'usuarios', 'direcao': 'desc'};
  
        function ordenarTabela(coluna) {  
            // üî• DESABILITADO: Dashboard individual n√£o precisa de ordena√ß√£o (s√≥ 1 revenda)  
            console.log('Ordena√ß√£o desabilitada no dashboard individual');  
            return;  
        }  
  
        function gerarTabelaGeralOrdenada(dadosOrdenados) {    
            const tbody = document.getElementById('tbody-dados');    
            let tableHTML = '';
          
            // üî• CORRE√á√ÉO: Exibir apenas a revenda atual (n√£o precisa de loop)    
            const revenda = dadosOrdenados[0];  // S√≥ tem 1 revenda nos dados
          
            const classificacao = revenda.health_classificacao;    
            const porteClass = revenda.porte === 'PEQUENO' ? 'porte-pequeno' :    
                               revenda.porte === 'M√âDIO' ? 'porte-medio' : 'porte-grande';
          
            const usuarios = revenda.usuarios || 0;
          
            const percentualOcorrencias = (revenda.percentual_ocorrencias_acumulado !== undefined && revenda.percentual_ocorrencias_acumulado !== null)    
                ? revenda.percentual_ocorrencias_acumulado    
                : 0;
          
            // üî• MANTER AS MESMAS CORES DO DASHBOARD GERAL    
            const corTME = classificarTME(revenda.tme_seconds);    
            const corInsat = classificarInsatisfacao(revenda.insatisfacao);    
            const corTempoEspera = classificarTempoEspera(revenda.tempo_espera_seconds);    
            const corSaldo = classificarSaldoPendencias(revenda.saldo_pendencias);    
            const corSS = classificarSSSSC(revenda.ss_ssc);    
            const corNPS = classificarNPS(revenda.nps);    
            const corOcorrencias = classificarOcorrencias(percentualOcorrencias);
          
            const naClass = 'na-value';
          
            const trendTME = getTrendIcon(revenda.tme_seconds, revenda.tme_anterior_seconds, true);    
            const trendInsat = getTrendIcon(revenda.insatisfacao_num, revenda.insatisfacao_anterior_num, true);    
            const trendTempoEspera = getTrendIcon(revenda.tempo_espera_seconds, revenda.tempo_espera_anterior_seconds, true);    
            const trendSaldo = getTrendIcon(revenda.saldo_pendencias_num, revenda.saldo_pendencias_anterior_num, true);    
            const trendSS = getTrendIcon(revenda.ss_ssc_num, revenda.ss_ssc_anterior_num, true);    
            const trendNPS = getTrendIcon(parseInt(revenda.nps), revenda.nps_anterior_num, false);    
            const trendUsuarios = getTrendIcon(usuarios, revenda.usuarios_anterior, false);    
            const trendOcorrencias = '';
          
            // üî• LINHA DA REVENDA (com destaque em azul claro)    
            tableHTML += `    
                <tr class="revenda-atual">    
                    <td>${revenda.nome}</td>    
                    <td style="font-weight: 700; font-size: 1.2em; color: ${classificacao.cor}">${revenda.health_score}</td>    
                    <td style="color: ${classificacao.cor}; font-weight: 600;">${classificacao.emoji} ${classificacao.texto}</td>    
                    <td>${usuarios} ${trendUsuarios}</td>    
                    <td><span class="porte-badge ${porteClass}">${revenda.porte}</span></td>    
                    <td style="background-color: ${corTME || 'transparent'}">${revenda.tme} ${trendTME}</td>    
                    <td class="${revenda.insatisfacao === 'N/D' ? naClass : ''}" style="background-color: ${revenda.insatisfacao === 'N/D' ? 'transparent' : corInsat}">${revenda.insatisfacao} ${trendInsat}</td>    
                    <td class="${revenda.tempo_espera === 'N/D' ? naClass : ''}" style="background-color: ${revenda.tempo_espera === 'N/D' ? 'transparent' : corTempoEspera}">${revenda.tempo_espera} ${trendTempoEspera}</td>    
                    <td class="${revenda.saldo_pendencias === 'N/D' ? naClass : ''}" style="background-color: ${revenda.saldo_pendencias === 'N/D' ? 'transparent' : corSaldo}">${revenda.saldo_pendencias} ${trendSaldo}</td>    
                    <td class="${revenda.ss_ssc === 'N/D' ? naClass : ''}" style="background-color: ${revenda.ss_ssc === 'N/D' ? 'transparent' : corSS}">${revenda.ss_ssc} ${trendSS}</td>    
                    <td class="${revenda.nps === 'N/D' ? naClass : ''}" style="background-color: ${revenda.nps === 'N/D' ? 'transparent' : corNPS}">${revenda.nps} ${trendNPS}</td>    
                    <td style="background-color: ${corOcorrencias || 'transparent'}">${percentualOcorrencias.toFixed(2)}% ${trendOcorrencias}</td>    
                </tr>    
            `;
          
            // üî• LINHA DE M√âDIAS GERAIS (mesma do dashboard geral)    
            tableHTML += `    
                <tr class="media-row">    
                    <td>M√âDIA REVENDAS</td>    
                    <td>-</td>    
                    <td>-</td>    
                    <td>-</td>    
                    <td>-</td>    
                    <td>${mediaTme}</td>    
                    <td>${mediaInsatisfacao}</td>    
                    <td>${mediaTempoEspera}</td>    
                    <td>${mediaSaldoPendencias}</td>    
                    <td>${mediaSSSSC}</td>    
                    <td>${mediaNPS}</td>    
                    <td>${mediaOcorrenciasPonderada.toFixed(2)}%</td>    
                </tr>    
            `;
          
            tbody.innerHTML = tableHTML;    
        }
  
        function time_to_seconds(time_str) {  
            if (!time_str || time_str === 'N/D' || time_str.trim() === '-') return 0;
  
            try {  
                const parts = time_str.split(':');  
                if (parts.length === 3) {  
                    return parseInt(parts[0]) * 3600 + parseInt(parts[1]) * 60 + parseInt(parts[2]);  
                } else if (parts.length === 2) {  
                    return parseInt(parts[0]) * 60 + parseInt(parts[1]);  
                }  
                return 0;  
            } catch {  
                return 0;  
            }  
        }
  
        function trocarAba(aba, event) {    
            document.querySelectorAll('.nav-btn').forEach(btn => {    
                btn.classList.remove('active');    
            });    
            event.target.classList.add('active');
            
            document.querySelectorAll('.content-section').forEach(section => {    
                section.classList.remove('active');    
            });
            
            if (aba === 'geral') {    
                document.getElementById('secao-geral').classList.add('active');    
            } else if (aba === 'metas') {    
                document.getElementById('secao-metas').classList.add('active');    
                if (!chartEvolucao) {    
                    inicializarDashboardMetas();    
                }    
            } else if (aba === 'ocorrencias') {      
                document.getElementById('secao-ocorrencias').classList.add('active');      
                if (document.getElementById('tbody-ocorrencias').innerHTML === '') {      
                    popularFiltros();
                      
                    // üî• NOVO: Ordenar por data DESC automaticamente ao carregar  
                    ordenarOcorrencias('data');  
                }      
            }      
        } 
  
        function calcularDifMesAnterior(atual, anterior) {  
            if (anterior === 0 || !anterior) return null;  
            return ((atual - anterior) / anterior * 100).toFixed(1);  
        }
  
        function getTrendIcon(atual, anterior, menorEhMelhor = false) {  
            if (anterior === null || anterior === undefined || atual === null || atual === undefined) return '';
  
            const numAtual = parseFloat(atual) || 0;  
            const numAnterior = parseFloat(anterior) || 0;
  
            if (numAtual === numAnterior && numAnterior === 0 && numAtual === 0) {  
                return '<span class="trend-icon" style="color: #6b7280;">‚ñ†</span>';  
            }
  
            if (numAtual === numAnterior) {  
                return '<span class="trend-icon" style="color: #6b7280;">‚ñ†</span>';  
            }
  
            let melhorou;  
            if (menorEhMelhor) {  
                melhorou = numAtual < numAnterior;  
            } else {  
                melhorou = numAtual > numAnterior;  
            }
  
            return melhorou ? '<span class="trend-icon trend-up">‚ñ≤</span>' : '<span class="trend-icon trend-down">‚ñº</span>';  
        }
  
        function gerarPendencias() {  
            const pendenciasContainer = document.getElementById('pendencias-container');  
            let htmlPendencias = '';
  
            const totalRDMs = pendenciasData.rdms ? pendenciasData.rdms.reduce((sum, rdm) => sum + rdm.itens.length, 0) : 0;  
            const totalAcoes = pendenciasData.acoes ? pendenciasData.acoes.reduce((sum, acao) => sum + acao.itens.length, 0) : 0;  
            const totalReclamacoes = pendenciasData.reclamacoes ? pendenciasData.reclamacoes.reduce((sum, rec) => sum + rec.itens.length, 0) : 0;
  
            htmlPendencias += '<div class="pendencia-card">';  
            htmlPendencias += `<h3><span>üìã RDMs Pendentes</span><span class="pendencia-count">(${totalRDMs})</span></h3>`;  
            htmlPendencias += '<div class="pendencia-content">';
  
            if (pendenciasData.rdms && pendenciasData.rdms.length > 0) {  
                pendenciasData.rdms.forEach(rdm => {  
                    htmlPendencias += '<div class="pendencia-item">';  
                    htmlPendencias += `<div class="pendencia-revenda">${rdm.revenda}</div>`;  
                    htmlPendencias += '<div class="pendencia-descricao">';  
                    rdm.itens.forEach(item => {  
                        htmlPendencias += `<span>${item}</span>`;  
                    });  
                    htmlPendencias += '</div>';  
                    htmlPendencias += '</div>';  
                });  
            } else {  
                htmlPendencias += '<div class="sem-pendencias">‚úÖ Nenhuma RDM pendente</div>';  
            }
  
            htmlPendencias += '</div>';  
            htmlPendencias += '</div>';
  
            htmlPendencias += '<div class="pendencia-card">';  
            htmlPendencias += `<h3><span>‚ö° A√ß√µes Pendentes</span><span class="pendencia-count">(${totalAcoes})</span></h3>`;  
            htmlPendencias += '<div class="pendencia-content">';
  
            if (pendenciasData.acoes && pendenciasData.acoes.length > 0) {  
                pendenciasData.acoes.forEach(acao => {  
                    htmlPendencias += '<div class="pendencia-item">';  
                    htmlPendencias += `<div class="pendencia-revenda">${acao.revenda}</div>`;  
                    htmlPendencias += '<div class="pendencia-descricao">';  
                    acao.itens.forEach(item => {  
                        htmlPendencias += `<span>${item}</span>`;  
                    });  
                    htmlPendencias += '</div>';  
                    htmlPendencias += '</div>';  
                });  
            } else {  
                htmlPendencias += '<div class="sem-pendencias">‚úÖ Nenhuma a√ß√£o pendente</div>';  
            }
  
            htmlPendencias += '</div>';  
            htmlPendencias += '</div>';
  
            htmlPendencias += '<div class="pendencia-card">';  
            htmlPendencias += `<h3><span>üòû Reclama√ß√µes Pendentes</span><span class="pendencia-count">(${totalReclamacoes})</span></h3>`;  
            htmlPendencias += '<div class="pendencia-content">';
  
            if (pendenciasData.reclamacoes && pendenciasData.reclamacoes.length > 0) {  
                pendenciasData.reclamacoes.forEach(reclamacao => {  
                    htmlPendencias += '<div class="pendencia-item">';  
                    htmlPendencias += `<div class="pendencia-revenda">${reclamacao.revenda}</div>`;  
                    htmlPendencias += '<div class="pendencia-descricao">';  
                    reclamacao.itens.forEach(item => {  
                        htmlPendencias += `<span>${item}</span>`;  
                    });  
                    htmlPendencias += '</div>';  
                    htmlPendencias += '</div>';  
                });  
            } else {  
                htmlPendencias += '<div class="sem-pendencias">‚úÖ Nenhuma reclama√ß√£o pendente</div>';  
            }
  
            htmlPendencias += '</div>';  
            htmlPendencias += '</div>';
  
            pendenciasContainer.innerHTML = htmlPendencias;  
        }
  
        function getColorForValue(value, isReverse = false) {  
            value = Math.max(0, Math.min(1, value));
  
            if (isReverse) {  
                value = 1 - value;  
            }
  
            let r, g;
  
            if (value < 0.5) {  
                r = 255;  
                g = Math.round(255 * (value / 0.5));  
            } else {  
                r = Math.round(255 * ((1 - value) / 0.5));  
                g = 255;  
            }
  
            return `rgb(${r}, ${g}, 0)`;  
        }
  
        function classificarTME(tmeSeconds) {  
            if (tmeSeconds === 0) return null;  
            const maxSeconds = 180;  
            const normalized = Math.min(tmeSeconds / maxSeconds, 1);  
            return getColorForValue(normalized, true);  
        }
  
        function classificarInsatisfacao(insatStr) {  
            if (insatStr === 'N/D') return null;  
            const valor = parseFloat(insatStr.replace('%', ''));  
            const maxValue = 5;  
            const normalized = Math.min(valor / maxValue, 1);  
            return getColorForValue(normalized, true);  
        }
  
        function classificarTempoEspera(segundos) {  
            if (segundos === 0) return null;  
            const maxSeconds = 18000;  
            const normalized = Math.min(segundos / maxSeconds, 1);  
            return getColorForValue(normalized, true);  
        }
  
        function classificarSaldoPendencias(saldoStr) {  
            if (saldoStr === 'N/D') return null;  
            const valor = parseFloat(saldoStr.replace('%', ''));  
            const maxValue = 50;  
            const normalized = Math.min(valor / maxValue, 1);  
            return getColorForValue(normalized, true);  
        }
  
        function classificarSSSSC(ssStr) {  
            if (ssStr === 'N/D') return null;  
            const valor = parseFloat(ssStr.replace('%', ''));  
            const maxValue = 20;  
            const normalized = Math.min(valor / maxValue, 1);  
            return getColorForValue(normalized, true);  
        }
  
        function classificarNPS(npsStr) {  
            if (npsStr === 'N/D') return null;  
            const valor = parseInt(npsStr);  
            const normalized = valor / 100;  
            return getColorForValue(normalized, false);  
        }
  
        function classificarOcorrencias(percentual) {  
            if (percentual === 0) return 'rgb(0, 255, 0)';
  
            const mediaRef = mediaOcorrenciasPonderada;
  
            if (!mediaRef || mediaRef === 0) return null;
  
            const desvio = (percentual - mediaRef) / mediaRef;
  
            let normalized;  
            if (desvio <= -0.3) {  
                normalized = 0;  
            } else if (desvio >= 0.3) {  
                normalized = 1;  
            } else {  
                normalized = (desvio + 0.3) / 0.6;  
            }
  
            return getColorForValue(normalized, true);  
        }
  
        function gerarTabelaGeral() {    
            // üî• CORRE√á√ÉO: Dashboard individual n√£o precisa de ordena√ß√£o complexa  
            // Apenas chamar diretamente a fun√ß√£o de gera√ß√£o com os dados da revenda  
            gerarTabelaGeralOrdenada(dadosRevendas);  
        } 
  
        function gerarKPIsVisaoGeral() {    
            const container = document.getElementById('kpis-visao-geral');
            
            if (!dadosMetas || Object.keys(dadosMetas).length === 0) {    
                container.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">‚ö†Ô∏è Nenhum dado de meta dispon√≠vel</p>';    
                return;    
            }
            
            // üî• FILTRAR APENAS METAS DA REVENDA ATUAL  
            const metasPrincipais = ['TME FOLHA', 'TME FISCONT', 'TME AT', 'INSATISFA√á√ÉO WEB', 'INSATISFA√á√ÉO FONE'];
            
            let totalMetasGeral = 0;    
            let totalAtingidasGeral = 0;    
            let totalJustificadasGeral = 0;  
            let totalNaoAtingidasGeral = 0;
            
            let totalMetasPrincipais = 0;    
            let totalAtingidasPrincipais = 0;    
            let totalJustificadasPrincipais = 0;  
            let totalNaoAtingidasPrincipais = 0;
            
            // Iterar sobre todas as metas  
            for (const metaNome in dadosMetas) {  
                if (!dadosMetas[metaNome][revendaAtual]) continue;
                
                const metasRevenda = dadosMetas[metaNome][revendaAtual];
                
                metasRevenda.forEach(metaMes => {  
                    if (metaMes.status === 'sem_meta') return;
                    
                    // Contar para "Geral"  
                    totalMetasGeral++;  
                    if (metaMes.status === 'atingida') totalAtingidasGeral++;  
                    if (metaMes.status === 'justificada') totalJustificadasGeral++;  
                    if (metaMes.status === 'nao_atingida') totalNaoAtingidasGeral++;
                    
                    // Contar para "Principais" (apenas metas principais)  
                    if (metasPrincipais.includes(metaNome)) {  
                        totalMetasPrincipais++;  
                        if (metaMes.status === 'atingida') totalAtingidasPrincipais++;  
                        if (metaMes.status === 'justificada') totalJustificadasPrincipais++;  
                        if (metaMes.status === 'nao_atingida') totalNaoAtingidasPrincipais++;  
                    }  
                });  
            }
          
            const totalAtingidasComJustificadas = totalAtingidasGeral + totalJustificadasGeral;  
            const percentualGeral = totalMetasGeral > 0 ? (totalAtingidasComJustificadas / totalMetasGeral * 100).toFixed(1) : 0;
          
            const totalAtingidasComJustificadasPrincipais = totalAtingidasPrincipais + totalJustificadasPrincipais;  
            const percentualPrincipais = totalMetasPrincipais > 0 ? (totalAtingidasComJustificadasPrincipais / totalMetasPrincipais * 100).toFixed(1) : 0;
          
            container.innerHTML = `  
                <div class="kpi-card">  
                    <div class="kpi-label">üéØ Atingimento Geral</div>  
                    <div class="kpi-value">${percentualGeral}%</div>  
                    <div class="kpi-subtitle">  
                        <span>‚úÖ ${totalAtingidasGeral} metas atingidas</span>  
                        <span>‚ùå ${totalNaoAtingidasGeral} n√£o atingidas</span>  
                    </div>  
                </div>
          
                <div class="kpi-card" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">  
                    <div class="kpi-label">‚≠ê Atingimento Metas Principais</div>  
                    <div class="kpi-value">${percentualPrincipais}%</div>  
                    <div class="kpi-subtitle">  
                        <span>‚úÖ ${totalAtingidasPrincipais} metas atingidas</span>  
                        <span>‚ùå ${totalNaoAtingidasPrincipais} n√£o atingidas</span>  
                    </div>  
                    <div style="font-size: 0.85em; margin-top: 10px; opacity: 0.9;">  
                        TME (Folha, Fiscal, AT) + Insatisfa√ß√£o (Web e Fone)  
                    </div>  
                </div>  
            `;  
        }
  
        function alternarFiltro(filtro, event) {  
            filtroAtual = filtro;
  
            document.querySelectorAll('.filter-buttons .filter-btn').forEach(btn => {  
                btn.classList.remove('active');  
            });  
            event.target.classList.add('active');
  
            atualizarGraficos();  
        }
  
        function atualizarGraficos() {    
            if (!dadosMetas || Object.keys(dadosMetas).length === 0) {    
                console.warn('‚ö†Ô∏è Sem dados para gerar gr√°ficos');    
                return;    
            }
                
            // üî• CALCULAR ESTAT√çSTICAS POR M√äS APENAS DA REVENDA ATUAL  
            const metasPrincipais = ['TME FOLHA', 'TME FISCONT', 'TME AT', 'INSATISFA√á√ÉO WEB', 'INSATISFA√á√ÉO FONE'];  
            const estatisticasPorMes = {};
                
            // Identificar todos os meses com dados  
            const todosMeses = new Set();  
            for (const metaNome in dadosMetas) {  
                if (!dadosMetas[metaNome][revendaAtual]) continue;  
                dadosMetas[metaNome][revendaAtual].forEach(metaMes => {  
                    if (metaMes.status !== 'sem_meta') {  
                        todosMeses.add(metaMes.mes);  
                    }  
                });  
            }
                
            // Calcular estat√≠sticas por m√™s  
            todosMeses.forEach(mes => {  
                let totalMetas = 0;  
                let totalAtingidas = 0;  
                let totalNaoAtingidas = 0;  
                let totalJustificadas = 0;
                    
                // Filtrar por tipo de meta (geral ou principais)  
                const metasParaContar = filtroAtual === 'geral'   
                    ? Object.keys(dadosMetas)   
                    : metasPrincipais;
                    
                metasParaContar.forEach(metaNome => {  
                    if (!dadosMetas[metaNome] || !dadosMetas[metaNome][revendaAtual]) return;
                        
                    const metaMes = dadosMetas[metaNome][revendaAtual].find(m => m.mes === mes);  
                    if (!metaMes || metaMes.status === 'sem_meta') return;
                        
                    totalMetas++;  
                    if (metaMes.status === 'atingida') totalAtingidas++;  
                    if (metaMes.status === 'nao_atingida') totalNaoAtingidas++;  
                    if (metaMes.status === 'justificada') totalJustificadas++;  
                });
                    
                const percentual = totalMetas > 0   
                    ? ((totalAtingidas + totalJustificadas) / totalMetas * 100)   
                    : 0;
                    
                estatisticasPorMes[mes] = {  
                    total_metas: totalMetas,  
                    total_atingidas: totalAtingidas,  
                    total_nao_atingidas: totalNaoAtingidas,  
                    total_justificadas: totalJustificadas,  
                    percentual_atingimento: percentual  
                };  
            });
                
            // Ordenar meses cronologicamente  
            const meses = Array.from(todosMeses).sort((a, b) => {  
                const dateA = new Date(a.replace(/(\w{3})\/(\d{4})/, '$1 1, $2'));  
                const dateB = new Date(b.replace(/(\w{3})\/(\d{4})/, '$1 1, $2'));  
                return dateA - dateB;  
            });
                
            // Filtrar apenas meses com metas  
            const mesesComDados = meses.filter(mes => estatisticasPorMes[mes].total_metas > 0);
                
            const percentuals = mesesComDados.map(mes => estatisticasPorMes[mes].percentual_atingimento);    
            const atingidas = mesesComDados.map(mes => estatisticasPorMes[mes].total_atingidas);    
            const naoAtingidas = mesesComDados.map(mes => estatisticasPorMes[mes].total_nao_atingidas);    
            const justificadas = mesesComDados.map(mes => estatisticasPorMes[mes].total_justificadas);  
  
            if (chartEvolucao) chartEvolucao.destroy();  
            if (chartStatus) chartStatus.destroy();
  
            const ctxEvolucao = document.getElementById('chart-evolucao').getContext('2d');  
            chartEvolucao = new Chart(ctxEvolucao, {  
                type: 'line',  
                data: {  
                    labels: meses,  
                    datasets: [{  
                        label: '% Atingimento',  
                        data: percentuals,  
                        borderColor: '#667eea',  
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',  
                        borderWidth: 3,  
                        fill: true,  
                        tension: 0.4,  
                        pointRadius: 6,  
                        pointHoverRadius: 8  
                    }]  
                },  
                options: {  
                    responsive: true,  
                    maintainAspectRatio: true,  
                    plugins: {  
                        legend: {'display': false}  
                    },  
                    scales: {  
                        y: {  
                            beginAtZero: true,  
                            max: 100,  
                            ticks: {  
                                callback: function(value) { return value + '%'; }  
                            }  
                        }  
                    }  
                }  
            });
  
            const ctxStatus = document.getElementById('chart-status').getContext('2d');  
            chartStatus = new Chart(ctxStatus, {  
                type: 'bar',  
                data: {  
                    labels: meses,  
                    datasets: [  
                        {'label': 'Atingidas', 'data': atingidas, 'backgroundColor': '#10b981'},  
                        {'label': 'N√£o Atingidas', 'data': naoAtingidas, 'backgroundColor': '#ef4444'},  
                        {'label': 'Justificadas', 'data': justificadas, 'backgroundColor': '#f59e0b'}  
                    ]  
                },  
                options: {  
                    responsive: true,  
                    maintainAspectRatio: true,  
                    plugins: {'legend': {'position': 'bottom'}},  
                    scales: {  
                        x: {'stacked': true},  
                        y: {'stacked': true, 'beginAtZero': true}  
                    }  
                }  
            });  
        }
  
        function gerarTabelaRevenda() {  
            const tabela = document.getElementById('tabela-revenda');
  
            if (!dadosMetas || Object.keys(dadosMetas).length === 0 || !revendaSelecionada) {  
                tabela.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">‚ö†Ô∏è Nenhum dado de meta dispon√≠vel ou revenda selecionada</p>';  
                return;  
            }
  
            let mesesTodos = [];  
            let foundMeses = false;  
            for (const metaKey in dadosMetas) {  
                if (dadosMetas[metaKey][revendaSelecionada]) {  
                    mesesTodos = dadosMetas[metaKey][revendaSelecionada].map(m => m.mes);  
                    foundMeses = true;  
                    break;  
                }  
            }
  
            if (!foundMeses) {  
                tabela.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">‚ö†Ô∏è Nenhuma meta encontrada para esta revenda.</p>';  
                return;  
            }
  
            const meses = [...new Set(mesesTodos)].filter(mes => {  
                let temDados = false;  
                ordemMetas.forEach(meta => {  
                    if (dadosMetas[meta] && dadosMetas[meta][revendaSelecionada]) {  
                        const metaMes = dadosMetas[meta][revendaSelecionada].find(m => m.mes === mes);  
                        if (metaMes && metaMes.status !== 'sem_meta') {  
                            temDados = true;  
                        }  
                    }  
                });  
                return temDados;  
            });
  
            meses.sort((a, b) => {  
                const dateA = new Date(a.replace(/(\w{3})\/(\d{4})/, '$1 1, $2'));  
                const dateB = new Date(b.replace(/(\w{3})\/(\d{4})/, '$1 1, $2'));  
                return dateA - dateB;  
            });
  
            const metasRevenda = [];  
            ordemMetas.forEach(meta => {  
                if (dadosMetas[meta] && dadosMetas[meta][revendaSelecionada]) {  
                    const temMetaValida = dadosMetas[meta][revendaSelecionada].some(m => m.status !== 'sem_meta');  
                    if (temMetaValida) {  
                        metasRevenda.push(meta);  
                    }  
                }  
            });
  
            if (metasRevenda.length === 0) {  
                tabela.innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">Revenda sem metas cadastradas ou sem dados para o per√≠odo</p>';  
                return;  
            }
  
            const estatisticasMes = {};  
            meses.forEach(mes => {  
                let atingidas = 0;  
                let naoAtingidas = 0;  
                let total = 0;
  
                metasRevenda.forEach(meta => {  
                    const metaMes = dadosMetas[meta][revendaSelecionada].find(m => m.mes === mes);  
                    if (metaMes && metaMes.status !== 'sem_meta') {  
                        total++;  
                        if (metaMes.status === 'atingida') {  
                            atingidas++;  
                        } else if (metaMes.status === 'nao_atingida') {  
                            naoAtingidas++;  
                        }  
                    }  
                });
  
                estatisticasMes[mes] = {  
                    atingidas,  
                    naoAtingidas,  
                    total,  
                    percAtingidas: total > 0 ? (atingidas / total * 100).toFixed(1) : 0,  
                    percNaoAtingidas: total > 0 ? (naoAtingidas / total * 100).toFixed(1) : 0  
                };  
            });
  
            let html = '<thead><tr><th>Meta</th>';  
            meses.forEach(mes => {  
                html += `<th>${mes}</th>`;  
            });  
            html += '</tr></thead>';
  
            html += '<tbody>';  
            metasRevenda.forEach(meta => {  
                html += `<tr><td>${nomesMetas[meta] || meta}</td>`;
  
                meses.forEach(mes => {  
                    const metaMes = dadosMetas[meta][revendaSelecionada].find(m => m.mes === mes);
  
                    if (metaMes) {  
                        let simbolo = '-';  
                        let classe = 'status-pendente';
  
                        if (metaMes.status === 'atingida') {  
                            simbolo = '‚óè';  
                            classe = 'status-atingida';  
                        } else if (metaMes.status === 'nao_atingida') {  
                            simbolo = '‚úó';  
                            classe = 'status-nao-atingida';  
                        } else if (metaMes.status === 'justificada') {  
                            simbolo = '‚ñ†';  
                            classe = 'status-justificada';  
                        } else if (metaMes.status === 'sem_meta') {  
                            simbolo = '-';  
                            classe = 'status-sem-meta';  
                        }
  
                        html += `<td class="${classe}">${simbolo}</td>`;  
                    } else {  
                        html += '<td class="status-sem-meta">-</td>';  
                    }  
                });
  
                html += '</tr>';  
            });
  
            html += '<tr class="stats-row"><td>% Metas atingidas</td>';  
            meses.forEach(mes => {  
                html += `<td>${estatisticasMes[mes].percAtingidas}%</td>`;  
            });  
            html += '</tr>';
  
            html += '<tr class="stats-row"><td>% Metas n√£o atingidas</td>';  
            meses.forEach(mes => {  
                html += `<td>${estatisticasMes[mes].percNaoAtingidas}%</td>`;  
            });  
            html += '</tr>';
  
            html += '</tbody>';
  
            tabela.innerHTML = html;  
        }
  
        function inicializarDashboardMetas() {  
            if (!dadosMetas || Object.keys(dadosMetas).length === 0) {  
                document.getElementById('kpis-visao-geral').innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">‚ö†Ô∏è Nenhum dado de meta dispon√≠vel</p>';  
                document.getElementById('tabela-revenda').innerHTML = '<p style="text-align: center; padding: 40px; color: #666;">‚ö†Ô∏è Nenhum dado de meta dispon√≠vel ou revenda selecionada</p>';  
                return;  
            }
  
            gerarKPIsVisaoGeral();  
            atualizarGraficos();  
            if (revendaSelecionada) {  
                gerarTabelaRevenda();  
            }  
        }

        // ========== FUN√á√ïES DE OCORR√äNCIAS ==========
          
        function gerarTabelaOcorrencias(dados = null) {            
            const tbody = document.getElementById('tbody-ocorrencias');            
            const contador = document.getElementById('contador-ocorrencias');
                      
            const dadosExibir = dados || ocorrenciasFiltradas;
                      
            if (!dadosExibir || dadosExibir.length === 0) {            
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 40px; color: #666;">‚ö†Ô∏è Nenhuma ocorr√™ncia encontrada</td></tr>';            
                contador.innerHTML = '';            
                return;            
            }
                      
            contador.innerHTML = `üìä Total: <strong>${dadosExibir.length}</strong> ocorr√™ncia(s)`;
                      
            let html = '';
                      
            dadosExibir.forEach(ocorrencia => {            
                const classeLinhaReclam = ocorrencia.tipo === 'RECLAM.' ? 'tipo-reclam' : '';            
                const classeLinhaProc = ocorrencia.tipo === 'PROC.' ? 'tipo-proc' : '';            
                const classeOrigem = ocorrencia.origem === 'WEB' ? 'origem-web' : 'origem-fone';
                          
                // üî• CORRE√á√ÉO: Formata√ß√£o correta de data brasileira  
                let dataFormatada = ocorrencia.data;
                  
                if (dataFormatada) {  
                    // Remover qualquer hora (tudo ap√≥s espa√ßo)  
                    dataFormatada = dataFormatada.split(' ')[0];
                      
                    // Verificar formato da data  
                    if (dataFormatada.includes('-')) {  
                        // Formato: aaaa-mm-dd ‚Üí Converter para dd/mm/aaaa  
                        const partes = dataFormatada.split('-');  
                        if (partes.length === 3) {  
                            const ano = partes[0];  
                            const mes = partes[1];  
                            const dia = partes[2];  
                            dataFormatada = `${dia}/${mes}/${ano}`;  
                        }  
                    }  
                    // Se j√° est√° no formato dd/mm/aaaa, n√£o faz nada  
                }
                          
                html += `            
                    <tr class="${classeLinhaReclam} ${classeLinhaProc}">            
                        <td>${dataFormatada}</td>            
                        <td style="font-weight: 700;">${ocorrencia.tipo}</td>            
                        <td><span class="${classeOrigem}">${ocorrencia.origem}</span></td>            
                        <td>${ocorrencia.categoria}</td>            
                        <td class="texto-longo">${ocorrencia.descricao || '-'}</td>            
                        <td class="texto-longo">${ocorrencia.observacoes || '-'}</td>            
                    </tr>            
                `;            
            });
                      
            tbody.innerHTML = html;            
        } 
          
        function popularFiltros() {    
            const tipos = [...new Set(ocorrenciasData.map(o => o.tipo))].sort();    
            const origens = [...new Set(ocorrenciasData.map(o => o.origem))].sort();    
            const categorias = [...new Set(ocorrenciasData.map(o => o.categoria))].sort();
              
            const selectTipo = document.getElementById('filtro-tipo');    
            const selectOrigem = document.getElementById('filtro-origem');    
            const selectCategoria = document.getElementById('filtro-categoria');
              
            tipos.forEach(tipo => {    
                const option = document.createElement('option');    
                option.value = tipo;    
                option.textContent = tipo;    
                selectTipo.appendChild(option);    
            });
              
            origens.forEach(origem => {    
                const option = document.createElement('option');    
                option.value = origem;    
                option.textContent = origem;    
                selectOrigem.appendChild(option);    
            });
              
            categorias.forEach(categoria => {    
                const option = document.createElement('option');    
                option.value = categoria;    
                option.textContent = categoria;    
                selectCategoria.appendChild(option);    
            });    
        }
          
        function filtrarOcorrencias() {    
            const tipoSelecionado = document.getElementById('filtro-tipo').value;    
            const origemSelecionada = document.getElementById('filtro-origem').value;    
            const categoriaSelecionada = document.getElementById('filtro-categoria').value;
              
            ocorrenciasFiltradas = ocorrenciasData.filter(o => {    
                const matchTipo = !tipoSelecionado || o.tipo === tipoSelecionado;    
                const matchOrigem = !origemSelecionada || o.origem === origemSelecionada;    
                const matchCategoria = !categoriaSelecionada || o.categoria === categoriaSelecionada;
                  
                return matchTipo && matchOrigem && matchCategoria;    
            });
              
            gerarTabelaOcorrencias(ocorrenciasFiltradas);    
        }
          
        function limparFiltros() {    
            document.getElementById('filtro-tipo').value = '';    
            document.getElementById('filtro-origem').value = '';    
            document.getElementById('filtro-categoria').value = '';
              
            ocorrenciasFiltradas = [...ocorrenciasData];    
            gerarTabelaOcorrencias(ocorrenciasFiltradas);    
        }
          
        function ordenarOcorrencias(coluna) {        
            if (ordemOcorrencias.coluna === coluna) {        
                ordemOcorrencias.direcao = ordemOcorrencias.direcao === 'asc' ? 'desc' : 'asc';        
            } else {        
                ordemOcorrencias.coluna = coluna;        
                // üî• CORRE√á√ÉO: Se clicar em DATA, ordenar DESC (mais recente primeiro) por padr√£o    
                ordemOcorrencias.direcao = (coluna === 'data') ? 'desc' : 'asc';        
            }
                    
            ocorrenciasFiltradas.sort((a, b) => {        
                let valorA = a[coluna];        
                let valorB = b[coluna];
                        
                if (coluna === 'data') {    
                    // üî• CORRE√á√ÉO CR√çTICA: Converter data brasileira (dd/mm/aaaa) para timestamp    
                    const converterData = (dataStr) => {    
                        if (!dataStr) return 0;
                            
                        // Remover hora se existir (pegar apenas primeira parte antes do espa√ßo)    
                        let dataLimpa = dataStr.trim();    
                        if (dataLimpa.includes(' ')) {    
                            dataLimpa = dataLimpa.split(' ')[0];    
                        }
                            
                        // Verificar formato dd/mm/aaaa    
                        if (dataLimpa.includes('/')) {    
                            const partes = dataLimpa.split('/');    
                            if (partes.length === 3) {    
                                const dia = parseInt(partes[0], 10);    
                                const mes = parseInt(partes[1], 10) - 1; // M√™s come√ßa em 0 no JavaScript    
                                const ano = parseInt(partes[2], 10);
                                    
                                // Validar valores    
                                if (!isNaN(dia) && !isNaN(mes) && !isNaN(ano)) {    
                                    // Criar objeto Date e retornar timestamp    
                                    const data = new Date(ano, mes, dia);    
                                    return data.getTime();    
                                }    
                            }    
                        }
                            
                        // Se formato n√£o reconhecido, tentar parsear diretamente    
                        const dataFallback = new Date(dataLimpa);    
                        return isNaN(dataFallback.getTime()) ? 0 : dataFallback.getTime();    
                    };
                        
                    // Converter ambas as datas para timestamp (n√∫mero)    
                    valorA = converterData(valorA);        
                    valorB = converterData(valorB);
                        
                    // Debug: Imprimir primeiras 3 convers√µes    
                    if (ocorrenciasFiltradas.indexOf(a) < 3) {    
                        console.log(`üîç DEBUG ordena√ß√£o:`, {    
                            original: a.data,    
                            timestamp: valorA,    
                            dataConvertida: new Date(valorA).toLocaleDateString('pt-BR')    
                        });    
                    }    
                } else {        
                    // Para outras colunas, converter para lowercase        
                    valorA = String(valorA).toLowerCase();        
                    valorB = String(valorB).toLowerCase();        
                }
                        
                // Ordenar por dire√ß√£o (asc ou desc)    
                if (ordemOcorrencias.direcao === 'asc') {        
                    return valorA > valorB ? 1 : -1;        
                } else {        
                    return valorA < valorB ? 1 : -1;        
                }        
            });
                    
            gerarTabelaOcorrencias(ocorrenciasFiltradas);        
        }
          
                console.log('üöÄ Inicializando dashboard individual...');  
        gerarPendencias();  
        gerarTabelaGeral();  
        console.log('‚úÖ Dashboard individual carregado com sucesso!');  
    </script>  
</body>  
</html>  
